# CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞ Render

## üéØ –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

### –°–ø–æ—Å–æ–± 1: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Auto-Deploy Render (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) ‚≠ê

**–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±** ‚Äî Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ `main`.

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑):

1. –í Render Dashboard ‚Üí —Ç–≤–æ–π **Web Service** ‚Üí **Settings**
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ:
   - **Auto-Deploy**: `Yes` ‚úÖ
   - **Branch**: `main` ‚úÖ
   - **Repository**: `Averjahn/test-back` ‚úÖ

#### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –¢—ã –¥–µ–ª–∞–µ—à—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "Fix CORS"
git push origin main

# Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# 1. –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
# 2. –ó–∞–ø—É—Å–∫–∞–µ—Ç Build Command
# 3. –î–µ–ø–ª–æ–∏—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
```

–°—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è –º–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ Render Dashboard ‚Üí **Events**.

---

### –°–ø–æ—Å–æ–± 2: GitHub Actions (–¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å **–ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞** (lint, tests) –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º, –∏—Å–ø–æ–ª—å–∑—É–π GitHub Actions.

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑):

1. **–ü–æ–ª—É—á–∏ Render API Key**:
   - https://dashboard.render.com ‚Üí **Account Settings ‚Üí API Keys**
   - **Create API Key** ‚Üí —Å–∫–æ–ø–∏—Ä—É–π –∫–ª—é—á

2. **–ü–æ–ª—É—á–∏ Service ID**:
   - –í Render Dashboard –æ—Ç–∫—Ä–æ–π Web Service
   - Service ID –≤ URL –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö (—Ñ–æ—Ä–º–∞—Ç: `srv-xxxxx`)

3. **–î–æ–±–∞–≤—å Secrets –≤ GitHub**:
   - –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `Averjahn/test-back` ‚Üí **Settings ‚Üí Secrets and variables ‚Üí Actions**
   - **New repository secret**:
     - `RENDER_API_KEY` = —Ç–≤–æ–π API Key
     - `RENDER_SERVICE_ID` = Service ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, `srv-xxxxx`)

4. **Workflow —É–∂–µ —Å–æ–∑–¥–∞–Ω** –≤ `.github/workflows/deploy.yml`

#### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

–ü—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ `main`:

1. ‚úÖ GitHub Actions –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ (lint, build)
2. ‚úÖ –ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Äî —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –¥–µ–ø–ª–æ–π –Ω–∞ Render —á–µ—Ä–µ–∑ API
3. ‚úÖ Render —Å–æ–±–∏—Ä–∞–µ—Ç –∏ –¥–µ–ø–ª–æ–∏—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é

---

## üìã –ß—Ç–æ –≤—ã–±—Ä–∞—Ç—å?

- **–°–ø–æ—Å–æ–± 1 (Auto-Deploy)** ‚Äî –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫
- **–°–ø–æ—Å–æ–± 2 (GitHub Actions)** ‚Äî –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

**–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** ‚Äî GitHub Actions –ø—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ–¥, –∞ Render –∑–∞–¥–µ–ø–ª–æ–∏—Ç.

---

## üîß –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é –±–µ–∑ push:

### –ß–µ—Ä–µ–∑ Render Dashboard:
1. Web Service ‚Üí **Manual Deploy ‚Üí Deploy latest commit**

### –ß–µ—Ä–µ–∑ npm –∫–æ–º–∞–Ω–¥—ã:
```bash
cd backend
npm run deploy:git
```

### –ß–µ—Ä–µ–∑ Render CLI:
```bash
render deploys create <SERVICE_ID> --wait
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã CI/CD

1. –°–¥–µ–ª–∞–π –Ω–µ–±–æ–ª—å—à–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–æ–¥–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π)
2. –ó–∞–∫–æ–º–º–∏—Ç—å –∏ –∑–∞–ø—É—à—å:

```bash
git add .
git commit -m "Test CI/CD"
git push origin main
```

3. –ü—Ä–æ–≤–µ—Ä—å:
   - **GitHub**: –≤–∫–ª–∞–¥–∫–∞ **Actions** ‚Üí –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è workflow
   - **Render**: Dashboard ‚Üí **Events** ‚Üí –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∞—Ç—å—Å—è –¥–µ–ø–ª–æ–π

4. –ß–µ—Ä–µ–∑ 5-10 –º–∏–Ω—É—Ç –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å:

```bash
curl https://—Ç–≤–æ–π-–±—ç–∫.onrender.com/api
```

---

## üêõ Troubleshooting

### Render –Ω–µ –¥–µ–ø–ª–æ–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ **Auto-Deploy** –≤–∫–ª—é—á—ë–Ω –≤ Settings
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ push –∏–¥—ë—Ç –≤ –≤–µ—Ç–∫—É `main` (–Ω–µ –≤ –¥—Ä—É–≥—É—é)
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ Render

### GitHub Actions –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ñ–∞–π–ª `.github/workflows/deploy.yml` –µ—Å—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ Secrets (`RENDER_API_KEY`, `RENDER_SERVICE_ID`) –¥–æ–±–∞–≤–ª–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ GitHub ‚Üí **Actions**

### –û—à–∏–±–∫–∞ "Service not found" –≤ GitHub Actions

- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `RENDER_SERVICE_ID` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (—Ñ–æ—Ä–º–∞—Ç: `srv-xxxxx`)
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ API Key –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –¥–µ–ø–ª–æ–π
